<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Home</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }

        .home-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
        }

        .left, .right {
            width: 45%;
        }

        .left input, .right input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .add-person {
            display: block;
            margin: 10px 0;
            cursor: pointer;
            color: #333;
        }

        button {
            width: 100%;
            padding: 10px;
            background-color: #333;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            border: none;
        }

        button:hover {
            background-color: #444;
        }

        .pending-type {
            margin-top: 20px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .group-person-entry {
            margin-bottom: 10px;
        }

        .group-person-entry input {
            width: calc(33% - 10px);
            margin-right: 5px;
        }

        .page {
            display: none;
        }

        .active {
            display: block;
        }
    </style>
</head>

<body>

    <main>
        <section id="home" class="page active">
            <div class="home-container">
                <div class="left">
                    <h2>Group Input</h2>
                    <input type="text" id="groupName" placeholder="Group Name">
                    <div id="groupPeopleContainer">
                        <div class="group-person-entry">
                            <input type="text" class="groupName" placeholder="Name">
                            <input type="number" class="ticketPrice" placeholder="Ticket Price">
                            <input type="number" class="ticketQty" placeholder="Quantity">
                        </div>
                    </div>
                    <span class="add-person" onclick="addPersonField()">+ Add Person</span>
                    <button onclick="saveGroup()">Save Group</button>
                </div>
                <div class="right">
                    <h2>Person Input</h2>
                    <input type="text" id="personName" placeholder="Name">
                    <input type="number" id="personTicketPrice" placeholder="Ticket Price">
                    <input type="number" id="personTicketQty" placeholder="Ticket Qty">
                    <button onclick="savePerson()">Save Person</button>
                </div>
            </div>
        </section>

        <section id="pending" class="page">
            <div id="groupPending" class="pending-type"></div>
            <div id="personPending" class="pending-type" style="display: none;"></div>
        </section>

        <section id="successful" class="page">
            <h2>Fully Paid Entries</h2>
            <div id="successfulList"></div>
        </section>
    </main>

    <script>
        // Helper to switch between pages
        function showPage(pageId) {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }

        // Add a new person input field for the group
        function addPersonField() {
            const groupPeopleContainer = document.getElementById('groupPeopleContainer');
            const newPersonField = document.createElement('div');
            newPersonField.classList.add('group-person-entry');
            newPersonField.innerHTML = `
                <input type="text" class="groupName" placeholder="Name">
                <input type="number" class="ticketPrice" placeholder="Ticket Price">
                <input type="number" class="ticketQty" placeholder="Quantity">
            `;
            groupPeopleContainer.appendChild(newPersonField);
        }

        // Save a new group with people
        function saveGroup() {
            const groupName = document.getElementById('groupName').value;
            const groupPeopleContainer = document.getElementById('groupPeopleContainer');
            const people = Array.from(groupPeopleContainer.getElementsByClassName('group-person-entry')).map(entry => {
                const name = entry.querySelector('.groupName').value;
                const ticketPrice = parseFloat(entry.querySelector('.ticketPrice').value);
                const ticketQty = parseInt(entry.querySelector('.ticketQty').value);
                return { name, ticketPrice, ticketQty, paid: 0 };
            });

            if (groupName && people.length > 0) {
                const groups = JSON.parse(localStorage.getItem('groups')) || [];
                groups.push({ name: groupName, people });
                localStorage.setItem('groups', JSON.stringify(groups));
                showPage('pending');
                renderPendingGroup();
            } else {
                alert('Please fill all fields for the group.');
            }
        }

        // Save a new person to pending list
        function savePerson() {
            const personName = document.getElementById('personName').value;
            const ticketPrice = parseFloat(document.getElementById('personTicketPrice').value);
            const ticketQty = parseInt(document.getElementById('personTicketQty').value);

            if (personName && !isNaN(ticketPrice) && !isNaN(ticketQty)) {
                const persons = JSON.parse(localStorage.getItem('persons')) || [];
                persons.push({ name: personName, ticket: ticketPrice, qty: ticketQty, paid: 0 });
                localStorage.setItem('persons', JSON.stringify(persons));
                showPage('pending');
                renderPendingPerson();
            } else {
                alert('Please fill all fields for the person.');
            }
        }

        // Render pending groups
        function renderPendingGroup() {
            const container = document.getElementById('groupPending');
            const groups = JSON.parse(localStorage.getItem('groups')) || [];

            container.innerHTML = groups.map(group => {
                const members = group.people.map(person => `
                    <div>${person.name} - Tickets: ${person.qty}, Balance: ${(person.ticketPrice * person.qty) - person.paid}</div>
                `).join('');
                return `
                    <div class="group-item">
                        <h3>${group.name}</h3>
                        ${members}
                    </div>
                `;
            }).join('');
        }

        // Render pending persons
        function renderPendingPerson() {
            const container = document.getElementById('personPending');
            const persons = JSON.parse(localStorage.getItem('persons')) || [];

            container.style.display = persons.length > 0 ? 'block' : 'none';

            container.innerHTML = persons.map(person => `
                <div>${person.name} - Tickets: ${person.qty}, Balance: ${(person.ticket * person.qty) - person.paid}</div>
            `).join('');
        }

        // Show successful entries
        function renderSuccessfulEntries() {
            const container = document.getElementById('successfulList');
            const groups = JSON.parse(localStorage.getItem('groups')) || [];
            const persons = JSON.parse(localStorage.getItem('persons')) || [];

            const successfulGroups = groups.filter(group => group.people.every(person => person.paid >= person.ticketPrice * person.qty));
            const successfulPersons = persons.filter(person => person.paid >= person.ticket * person.qty);

            container.innerHTML = `
                <h3>Successful Groups:</h3>
                ${successfulGroups.map(group => `
                    <div>${group.name}</div>
                `).join('')}
                <h3>Successful Persons:</h3>
                ${successfulPersons.map(person => `
                    <div>${person.name}</div>
                `).join('')}
            `;
        }

        // Initial render
        renderPendingGroup();
        renderPendingPerson();
    </script>

</body>

</html>
